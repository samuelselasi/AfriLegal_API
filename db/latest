-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.articles
(
    id integer NOT NULL,
    country_id integer,
    chapter_id integer,
    "number" integer,
    title character varying,
    text character varying,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.chapters
(
    id integer NOT NULL,
    "number" integer,
    text character varying,
    country_id integer,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.countries
(
    id integer NOT NULL,
    name character varying,
    region_id integer,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.items
(
    id integer NOT NULL,
    title character varying,
    description character varying,
    owner_id integer,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pdf_documents
(
    id integer NOT NULL,
    title character varying,
    content bytea,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.preamble
(
    id integer NOT NULL,
    text character varying,
    country_id integer,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.regions
(
    id integer NOT NULL,
    name character varying,
    is_active boolean,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.sections
(
    id integer NOT NULL,
    country_id integer,
    chapter_id integer,
    article_id integer,
    "number" integer,
    text character varying,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.subsections
(
    id integer NOT NULL,
    country_id integer,
    chapter_id integer,
    article_id integer,
    section_id integer,
    sub character varying,
    text character varying,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.users
(
    id integer NOT NULL,
    email character varying,
    hashed_password character varying,
    is_active boolean,
    PRIMARY KEY (id)
);

ALTER TABLE public.articles
    ADD FOREIGN KEY (chapter_id)
    REFERENCES public.chapters (id)
    NOT VALID;


ALTER TABLE public.articles
    ADD FOREIGN KEY (country_id)
    REFERENCES public.countries (id)
    NOT VALID;


ALTER TABLE public.chapters
    ADD FOREIGN KEY (country_id)
    REFERENCES public.countries (id)
    NOT VALID;


ALTER TABLE public.countries
    ADD FOREIGN KEY (region_id)
    REFERENCES public.regions (id)
    NOT VALID;


ALTER TABLE public.items
    ADD FOREIGN KEY (owner_id)
    REFERENCES public.users (id)
    NOT VALID;


ALTER TABLE public.preamble
    ADD FOREIGN KEY (country_id)
    REFERENCES public.countries (id)
    NOT VALID;


ALTER TABLE public.sections
    ADD FOREIGN KEY (article_id)
    REFERENCES public.articles (id)
    NOT VALID;


ALTER TABLE public.sections
    ADD FOREIGN KEY (chapter_id)
    REFERENCES public.chapters (id)
    NOT VALID;


ALTER TABLE public.sections
    ADD FOREIGN KEY (country_id)
    REFERENCES public.countries (id)
    NOT VALID;


ALTER TABLE public.subsections
    ADD FOREIGN KEY (article_id)
    REFERENCES public.articles (id)
    NOT VALID;


ALTER TABLE public.subsections
    ADD FOREIGN KEY (chapter_id)
    REFERENCES public.chapters (id)
    NOT VALID;


ALTER TABLE public.subsections
    ADD FOREIGN KEY (country_id)
    REFERENCES public.countries (id)
    NOT VALID;


ALTER TABLE public.subsections
    ADD FOREIGN KEY (section_id)
    REFERENCES public.sections (id)
    NOT VALID;

END;